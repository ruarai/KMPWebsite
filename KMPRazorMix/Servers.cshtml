@using KMPRazorMix
@{
    Page.Title = "Community Servers";
    Layout = "~/_Layout.cshtml";
}

<p>This is a list of community servers.
    <br />
    If you've got a stable server that you would like to put on this list, ask around on the #KMP irc channel on esper.net or submit a patch/pull request on the <a href="https://github.com/ruarai/kmpinfo">kmpinfo repo</a>.</p>

<table id="servers">
    <thead>
        <tr>
            <td>Name</td>
            <td>Address</td>
            <td>Players</td>
            <td>Version</td>
        </tr>
    </thead>
    <tbody>
        @{
            foreach (var s in KMP.Servers.Where(s => s.IsOnline))
            {
                if (s.Version == KMP.KMPVersion)
                {
                    string output = "<tr>";
                    output += string.Format("<td>{0}</td>", s.Information);
                    output += string.Format("<td>{0}</td>", s.Address);
                    output += string.Format("<td>{0}/{1}</td>", s.Players, s.MaxPlayers);
                    output += string.Format("<td>{0}</td>", s.Version);
                    output += string.Format("<td><a href=\"Server?server={0}\">Info</a></td>", s.Address);
                    output += "</tr>";
                    WriteLiteral(output);
                }
                else
                {
                    string output = "<tr id=\"outdatedServer\">";
                    output += string.Format("<td>{0}</td>", s.Information);
                    output += string.Format("<td>{0}</td>", s.Address);
                    output += string.Format("<td>{0}/{1}</td>", s.Players, s.MaxPlayers);
                    output += string.Format("<td>{0}</td>", s.Version);
                    output += string.Format("<td><a href=\"Server?server={0}\">Info</a></td>", s.Address);
                    output += "</tr>";
                    WriteLiteral(output);
                }
            }
        }
    </tbody>
</table>
